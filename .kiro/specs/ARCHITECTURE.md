# AAE ç³»ç»Ÿæ¶æ„æ–‡æ¡£ï¼ˆArchitecture Documentï¼‰

## ç³»ç»Ÿæ¦‚è¿°ï¼ˆSystem Overviewï¼‰

AAEï¼ˆAutomated Ad Engineï¼‰æ˜¯ä¸€ä¸ªåŸºäº **ReAct Agent + 3 ç±» Tools** æ¶æ„çš„è‡ªåŠ¨åŒ–å¹¿å‘Šç®¡ç†ç³»ç»Ÿã€‚ç³»ç»Ÿå¯¹å¤–æä¾›**ä¸€ä¸ªå¯¹è¯å…¥å£**ï¼Œç”¨æˆ·é€šè¿‡è‡ªç„¶è¯­è¨€ä¸ Agent äº¤äº’ï¼ŒAgent ä½¿ç”¨ **ReActï¼ˆReasoning + Actingï¼‰æ¨¡å¼**è‡ªä¸»è§„åˆ’å’Œæ‰§è¡Œä»»åŠ¡ï¼Œé€šè¿‡è°ƒç”¨ **3 ç±» Tools**ï¼ˆLangChain å†…ç½®ã€Agent è‡ªå®šä¹‰ã€MCP Serverï¼‰å®Œæˆå„ç§å¹¿å‘Šç®¡ç†ä»»åŠ¡ã€‚

---

## æ ¸å¿ƒæ¶æ„åŸåˆ™ï¼ˆCore Architecture Principlesï¼‰

1. **ç»Ÿä¸€å¯¹è¯å…¥å£**ï¼šç”¨æˆ·åªéœ€ä¸ä¸€ä¸ª AI Agent å¯¹è¯ï¼Œæ— éœ€åˆ‡æ¢ä¸åŒç•Œé¢
2. **ReAct è‡ªä¸»è§„åˆ’**ï¼šAgent ä½¿ç”¨ Gemini è‡ªåŠ¨åˆ†è§£ä»»åŠ¡ã€é€‰æ‹©å·¥å…·ã€è¯„ä¼°ç»“æœ
3. **3 ç±» Tools æ¶æ„**ï¼šæ¸…æ™°çš„å·¥å…·èŒè´£åˆ’åˆ†ï¼ˆé€šç”¨å·¥å…·ã€AI èƒ½åŠ›ã€æ•°æ®äº¤äº’ï¼‰
4. **æ™ºèƒ½ Human-in-the-Loop**ï¼šåœ¨å¿…è¦æ—¶è¯·æ±‚äººå·¥ç¡®è®¤ï¼Œé¿å…è¿‡åº¦æ‰“æ‰°
5. **Web Platform ä½œä¸ºæ ¸å¿ƒæ•°æ®å¹³å°**ï¼šæ‰€æœ‰ä¸šåŠ¡æ•°æ®ç»Ÿä¸€å­˜å‚¨å’Œç®¡ç†
6. **MCP åè®®é€šä¿¡**ï¼šAgent é€šè¿‡ MCP åè®®ä¸ Web Platform é€šä¿¡
7. **æœªæ¥å¯æ‰©å±•**ï¼šæ”¯æŒ Skills åŠ¨æ€åŠ è½½æœºåˆ¶ï¼ˆå½“ Tools æ•°é‡è¿‡å¤šæ—¶ï¼‰

---

## ç³»ç»Ÿæ¶æ„å›¾ï¼ˆSystem Architecture Diagramï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Frontend (Next.js + SSE)                      â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚Dashboard â”‚  â”‚ç´ æç®¡ç†  â”‚  â”‚æŠ¥è¡¨ç®¡ç†  â”‚  â”‚è½åœ°é¡µåº“  â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚         åµŒå…¥å¼ AI Agent å¯¹è¯ç•Œé¢ (å³ä¸‹è§’)           â”‚       â”‚
â”‚  â”‚                                                      â”‚       â”‚
â”‚  â”‚  ç”¨æˆ·: "å¸®æˆ‘ç”Ÿæˆç´ æå¹¶åˆ›å»ºå¹¿å‘Š"                      â”‚       â”‚
â”‚  â”‚  AI: "å¥½çš„ï¼æ­£åœ¨ä¸ºä½ ç”Ÿæˆç´ æ..."                    â”‚       â”‚
â”‚  â”‚                                                      â”‚       â”‚
â”‚  â”‚  [HTTP POST + SSE æµå¼å“åº”]                         â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ HTTP + SSE
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Backend (FastAPI)                          â”‚
â”‚                   (æ ¸å¿ƒæ•°æ®ç®¡ç†å¹³å°)                               â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                   æ•°æ®ç®¡ç†æ¨¡å—                           â”‚    â”‚
â”‚  â”‚                                                          â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚
â”‚  â”‚  â”‚ç´ æç®¡ç†  â”‚ â”‚æŠ¥è¡¨æ•°æ®  â”‚ â”‚è½åœ°é¡µåº“  â”‚ â”‚æŠ•æ”¾ç®¡ç†  â”‚  â”‚    â”‚
â”‚  â”‚  â”‚Module    â”‚ â”‚Module    â”‚ â”‚Module    â”‚ â”‚Module    â”‚  â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚
â”‚  â”‚                                                          â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚    â”‚
â”‚  â”‚  â”‚ç”¨æˆ·è®¤è¯  â”‚ â”‚è®¢é˜…è®¡è´¹  â”‚ â”‚è´¦æˆ·ç®¡ç†  â”‚               â”‚    â”‚
â”‚  â”‚  â”‚Module    â”‚ â”‚Module    â”‚ â”‚Module    â”‚               â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                   MCP Server                             â”‚    â”‚
â”‚  â”‚              (æä¾› MCP Server Tools)                     â”‚    â”‚
â”‚  â”‚                                                          â”‚    â”‚
â”‚  â”‚  - save_creative / get_creative / list_creatives         â”‚    â”‚
â”‚  â”‚  - fetch_ad_data / get_historical_data / save_report     â”‚    â”‚
â”‚  â”‚  - create_campaign / update_campaign / pause_campaign    â”‚    â”‚
â”‚  â”‚  - save_landing_page / get_landing_page / upload_to_s3   â”‚    â”‚
â”‚  â”‚  - fetch_competitor_data / fetch_market_data             â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                   æ•°æ®å­˜å‚¨å±‚                             â”‚    â”‚
â”‚  â”‚                                                          â”‚    â”‚
â”‚  â”‚  - MySQL 8.4 (ä¸šåŠ¡æ•°æ®)                                  â”‚    â”‚
â”‚  â”‚  - Redis (ç¼“å­˜ + ä¼šè¯ + Memory)                         â”‚    â”‚
â”‚  â”‚  - AWS S3 (æ–‡ä»¶å­˜å‚¨)                                    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”‚ MCP Protocol
                            â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    AI Orchestrator                                â”‚
â”‚                  (ReAct Agent æ¶æ„)                               â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              ReAct Agent (Gemini 2.5)                   â”‚    â”‚
â”‚  â”‚                                                          â”‚    â”‚
â”‚  â”‚  Step 1: Planner (åˆ¶å®šè®¡åˆ’)                              â”‚    â”‚
â”‚  â”‚  â”œâ”€ ç†è§£ç”¨æˆ·æ„å›¾                                          â”‚    â”‚
â”‚  â”‚  â”œâ”€ åˆ†è§£ä»»åŠ¡æ­¥éª¤                                          â”‚    â”‚
â”‚  â”‚  â””â”€ é€‰æ‹©éœ€è¦çš„ Tools                                      â”‚    â”‚
â”‚  â”‚                                                          â”‚    â”‚
â”‚  â”‚  Step 2: Evaluator (åˆ¤æ–­æ˜¯å¦éœ€è¦äººå·¥)                    â”‚    â”‚
â”‚  â”‚  â”œâ”€ æ£€æŸ¥æ“ä½œé£é™©ï¼ˆèŠ±è´¹ã€åˆ é™¤ç­‰ï¼‰                          â”‚    â”‚
â”‚  â”‚  â”œâ”€ æ£€æŸ¥å‚æ•°æ¨¡ç³Šåº¦                                        â”‚    â”‚
â”‚  â”‚  â””â”€ å†³å®šæ˜¯å¦éœ€è¦ Human-in-the-Loop                       â”‚    â”‚
â”‚  â”‚                                                          â”‚    â”‚
â”‚  â”‚  Step 3: Human-in-the-Loop (å¯é€‰)                        â”‚    â”‚
â”‚  â”‚  â”œâ”€ ç”Ÿæˆç¡®è®¤è¯·æ±‚                                          â”‚    â”‚
â”‚  â”‚  â”œâ”€ ç”Ÿæˆé€‰é¡¹ï¼ˆé¢„è®¾ + å…¶ä»– + å–æ¶ˆï¼‰                        â”‚    â”‚
â”‚  â”‚  â””â”€ ç­‰å¾…ç”¨æˆ·è¾“å…¥                                          â”‚    â”‚
â”‚  â”‚                                                          â”‚    â”‚
â”‚  â”‚  Step 4: Act (æ‰§è¡Œ Tools)                                â”‚    â”‚
â”‚  â”‚  â”œâ”€ è°ƒç”¨é€‰å®šçš„ Tools                                      â”‚    â”‚
â”‚  â”‚  â””â”€ å¤„ç†æ‰§è¡Œç»“æœ                                          â”‚    â”‚
â”‚  â”‚                                                          â”‚    â”‚
â”‚  â”‚  Step 5: Memory (è®°å½•ç»“æœ)                               â”‚    â”‚
â”‚  â”‚  â”œâ”€ ä¿å­˜æ‰§è¡Œå†å²åˆ° Redis                                  â”‚    â”‚
â”‚  â”‚  â””â”€ æ›´æ–°å¯¹è¯ä¸Šä¸‹æ–‡                                        â”‚    â”‚
â”‚  â”‚                                                          â”‚    â”‚
â”‚  â”‚  Step 6: Perceive (è¯„ä¼°æ˜¯å¦å®Œæˆ)                         â”‚    â”‚
â”‚  â”‚  â”œâ”€ æ£€æŸ¥ä»»åŠ¡æ˜¯å¦å®Œæˆ                                      â”‚    â”‚
â”‚  â”‚  â””â”€ å†³å®šæ˜¯å¦ç»§ç»­å¾ªç¯                                      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                              â”‚                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              3 ç±» Tools                                    â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚  â”‚
â”‚  â”‚  â”‚ 1. LangChain å†…ç½® Tools                      â”‚         â”‚  â”‚
â”‚  â”‚  â”‚  - google_search (æœç´¢ç«å“ä¿¡æ¯)              â”‚         â”‚  â”‚
â”‚  â”‚  â”‚  - calculator (è®¡ç®—æŒ‡æ ‡)                     â”‚         â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚  â”‚
â”‚  â”‚  â”‚ 2. Agent è‡ªå®šä¹‰ Tools (å¯è°ƒç”¨å¤§æ¨¡å‹)          â”‚         â”‚  â”‚
â”‚  â”‚  â”‚  Creative Tools:                             â”‚         â”‚  â”‚
â”‚  â”‚  â”‚  - generate_image_tool (Gemini Imagen)       â”‚         â”‚  â”‚
â”‚  â”‚  â”‚  - generate_video_tool (Gemini Veo)          â”‚         â”‚  â”‚
â”‚  â”‚  â”‚  - analyze_creative_tool (Gemini Vision)     â”‚         â”‚  â”‚
â”‚  â”‚  â”‚  - extract_product_info_tool (Gemini)        â”‚         â”‚  â”‚
â”‚  â”‚  â”‚                                               â”‚         â”‚  â”‚
â”‚  â”‚  â”‚  Performance Tools:                           â”‚         â”‚  â”‚
â”‚  â”‚  â”‚  - analyze_performance_tool (Gemini)         â”‚         â”‚  â”‚
â”‚  â”‚  â”‚  - detect_anomaly_tool (Gemini)              â”‚         â”‚  â”‚
â”‚  â”‚  â”‚  - generate_recommendations_tool (Gemini)    â”‚         â”‚  â”‚
â”‚  â”‚  â”‚                                               â”‚         â”‚  â”‚
â”‚  â”‚  â”‚  Campaign Tools:                              â”‚         â”‚  â”‚
â”‚  â”‚  â”‚  - optimize_budget_tool (Gemini)             â”‚         â”‚  â”‚
â”‚  â”‚  â”‚  - generate_ad_copy_tool (Gemini)            â”‚         â”‚  â”‚
â”‚  â”‚  â”‚  - suggest_targeting_tool (Gemini)           â”‚         â”‚  â”‚
â”‚  â”‚  â”‚                                               â”‚         â”‚  â”‚
â”‚  â”‚  â”‚  Landing Page Tools:                          â”‚         â”‚  â”‚
â”‚  â”‚  â”‚  - generate_page_content_tool (Gemini)       â”‚         â”‚  â”‚
â”‚  â”‚  â”‚  - translate_content_tool (Gemini)           â”‚         â”‚  â”‚
â”‚  â”‚  â”‚  - optimize_copy_tool (Gemini)               â”‚         â”‚  â”‚
â”‚  â”‚  â”‚                                               â”‚         â”‚  â”‚
â”‚  â”‚  â”‚  Market Tools:                                â”‚         â”‚  â”‚
â”‚  â”‚  â”‚  - analyze_competitor_tool (Gemini)          â”‚         â”‚  â”‚
â”‚  â”‚  â”‚  - analyze_trends_tool (Gemini)              â”‚         â”‚  â”‚
â”‚  â”‚  â”‚  - generate_strategy_tool (Gemini)           â”‚         â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚  â”‚
â”‚  â”‚  â”‚ 3. MCP Server Tools (Backend API)            â”‚         â”‚  â”‚
â”‚  â”‚  â”‚  - save_creative, get_creative               â”‚         â”‚  â”‚
â”‚  â”‚  â”‚  - fetch_ad_data, save_report                â”‚         â”‚  â”‚
â”‚  â”‚  â”‚  - create_campaign, update_campaign          â”‚         â”‚  â”‚
â”‚  â”‚  â”‚  - save_landing_page, upload_to_s3           â”‚         â”‚  â”‚
â”‚  â”‚  â”‚  - fetch_competitor_data, save_analysis      â”‚         â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              ä¸šåŠ¡é€»è¾‘å®ç°å±‚ (modules/)                   â”‚    â”‚
â”‚  â”‚                                                          â”‚    â”‚
â”‚  â”‚  - ad_creative/ (ç´ æç”Ÿæˆå’Œåˆ†æ)                         â”‚    â”‚
â”‚  â”‚  - ad_performance/ (æ€§èƒ½åˆ†æå’ŒæŠ¥è¡¨)                      â”‚    â”‚
â”‚  â”‚  - campaign_automation/ (å¹¿å‘ŠæŠ•æ”¾è‡ªåŠ¨åŒ–)                 â”‚    â”‚
â”‚  â”‚  - landing_page/ (è½åœ°é¡µç”Ÿæˆ)                            â”‚    â”‚
â”‚  â”‚  - market_insights/ (å¸‚åœºæ´å¯Ÿ)                           â”‚    â”‚
â”‚  â”‚                                                          â”‚    â”‚
â”‚  â”‚  æ³¨ï¼šmodules/ è¢« Agent Custom Tools è°ƒç”¨                 â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”‚ è°ƒç”¨å¹¿å‘Šå¹³å° API
                            â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                   â”‚                   â”‚
   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”
   â”‚Meta     â”‚         â”‚TikTok  â”‚         â”‚Google  â”‚
   â”‚Marketingâ”‚         â”‚Ads API â”‚         â”‚Ads API â”‚
   â”‚API      â”‚         â”‚        â”‚         â”‚        â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ReAct Agent å·¥ä½œæµç¨‹ï¼ˆReAct Agent Workflowï¼‰

### ReAct å¾ªç¯ï¼ˆReAct Loopï¼‰

```
ç”¨æˆ·æ¶ˆæ¯
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 1: Planner (åˆ¶å®šè®¡åˆ’)                                   â”‚
â”‚  - ä½¿ç”¨ Gemini ç†è§£ç”¨æˆ·æ„å›¾                                  â”‚
â”‚  - åˆ†è§£ä»»åŠ¡ä¸ºå…·ä½“æ­¥éª¤                                        â”‚
â”‚  - é€‰æ‹©éœ€è¦çš„ Tools                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 2: Evaluator (åˆ¤æ–­æ˜¯å¦éœ€è¦äººå·¥)                         â”‚
â”‚  - æ£€æŸ¥æ“ä½œé£é™©ï¼ˆèŠ±è´¹ã€åˆ é™¤ã€é‡è¦æ“ä½œï¼‰                      â”‚
â”‚  - æ£€æŸ¥å‚æ•°æ¨¡ç³Šåº¦ï¼ˆæ˜¯å¦éœ€è¦ç”¨æˆ·é€‰æ‹©ï¼‰                        â”‚
â”‚  - å†³å®šæ˜¯å¦éœ€è¦ Human-in-the-Loop                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”œâ”€ éœ€è¦äººå·¥ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                                  â”‚
    â–¼                                                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 3: Human-in-the-Loop               â”‚  â”‚ è·³è¿‡ï¼Œç»§ç»­æ‰§è¡Œ   â”‚
â”‚  - ç”Ÿæˆç¡®è®¤è¯·æ±‚                          â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚  - ç”Ÿæˆé€‰é¡¹ï¼ˆé¢„è®¾ + å…¶ä»– + å–æ¶ˆï¼‰        â”‚
â”‚  - ç­‰å¾…ç”¨æˆ·è¾“å…¥                          â”‚
â”‚  - å¤„ç†ç”¨æˆ·å“åº”                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 4: Act (æ‰§è¡Œ Tools)                                     â”‚
â”‚  - è°ƒç”¨é€‰å®šçš„ Toolsï¼ˆ3 ç±» Toolsï¼‰                            â”‚
â”‚  - å¤„ç†æ‰§è¡Œç»“æœ                                              â”‚
â”‚  - å¤„ç†æ‰§è¡Œé”™è¯¯                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 5: Memory (è®°å½•ç»“æœ)                                    â”‚
â”‚  - ä¿å­˜æ‰§è¡Œå†å²åˆ° Redis                                      â”‚
â”‚  - æ›´æ–°å¯¹è¯ä¸Šä¸‹æ–‡                                            â”‚
â”‚  - ç»´æŠ¤ Agent çŠ¶æ€                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 6: Perceive (è¯„ä¼°æ˜¯å¦å®Œæˆ)                              â”‚
â”‚  - æ£€æŸ¥ä»»åŠ¡æ˜¯å¦å®Œæˆ                                          â”‚
â”‚  - å†³å®šæ˜¯å¦ç»§ç»­å¾ªç¯                                          â”‚
â”‚  - ç”Ÿæˆæœ€ç»ˆå“åº”                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”œâ”€ æœªå®Œæˆ â”€â”€â–º è¿”å› Step 1ï¼ˆç»§ç»­å¾ªç¯ï¼‰
    â”‚
    â–¼
  è¿”å›ç”¨æˆ·
```

### Human-in-the-Loop æœºåˆ¶

**è§¦å‘æ¡ä»¶**ï¼š
1. **æ¶‰åŠèŠ±è´¹**ï¼šåˆ›å»ºå¹¿å‘Šã€å¢åŠ é¢„ç®—ç­‰
2. **é‡è¦æ“ä½œ**ï¼šåˆ é™¤å¹¿å‘Šã€æš‚åœ Campaign ç­‰
3. **å‚æ•°æ¨¡ç³Š**ï¼šç”¨æˆ·æœªæŒ‡å®šå…·ä½“å‚æ•°ï¼ˆå¦‚é£æ ¼ã€ç›®æ ‡å—ä¼—ç­‰ï¼‰

**äº¤äº’æ–¹å¼**ï¼š
1. **ç¡®è®¤è¯·æ±‚**ï¼šæ˜¾ç¤ºæ“ä½œè¯¦æƒ…ï¼Œç”¨æˆ·ç¡®è®¤æˆ–å–æ¶ˆ
2. **é€‰é¡¹è¯·æ±‚**ï¼šæä¾›é¢„è®¾é€‰é¡¹ + "å…¶ä»–" + "å–æ¶ˆ"
3. **è¾“å…¥è¯·æ±‚**ï¼šç”¨æˆ·è‡ªç”±è¾“å…¥å‚æ•°

**ç¤ºä¾‹**ï¼š
```
ç”¨æˆ·: "å¸®æˆ‘ç”Ÿæˆç´ æ"

Agent (Evaluator): é£æ ¼å‚æ•°æ¨¡ç³Šï¼Œéœ€è¦ç”¨æˆ·é€‰æ‹©

è¿”å›å‰ç«¯:
  "è¯·é€‰æ‹©ç´ æé£æ ¼ï¼š
   1ï¸âƒ£ ç°ä»£ç®€çº¦
   2ï¸âƒ£ æ´»åŠ›å¤šå½©
   3ï¸âƒ£ é«˜ç«¯å¥¢å
   â• å…¶ä»–
   âŒ å–æ¶ˆ"
```

### ä¸¤ç§è°ƒç”¨è·¯å¾„ï¼ˆInvocation Pathsï¼‰

#### è·¯å¾„ 1ï¼šç”¨æˆ·å¯¹è¯å¼è°ƒç”¨ï¼ˆé€šè¿‡ ReAct Agentï¼‰

```
ç”¨æˆ·å‘èµ· â†’ éœ€è¦ ReAct è§„åˆ’å’Œæ‰§è¡Œ

å‰ç«¯ 
  â†’ HTTP POST + SSE
  â†’ AI Orchestrator (ReAct Agent)
  â†’ Planner â†’ Evaluator â†’ Human-in-the-Loop (å¯é€‰) â†’ Act
  â†’ Agent Custom Tools / MCP Server Tools
  â†’ Backend MCP Server
  â†’ æ•°æ®åº“/S3
```

**é€‚ç”¨åœºæ™¯**ï¼š
- ç”¨æˆ·åœ¨å¯¹è¯ä¸­è¯´"å¸®æˆ‘ç”Ÿæˆç´ æ"
- ç”¨æˆ·åœ¨å¯¹è¯ä¸­è¯´"æŸ¥çœ‹æŠ¥è¡¨"
- ç”¨æˆ·åœ¨å¯¹è¯ä¸­è¯´"åˆ›å»ºå¹¿å‘Š"
- æ‰€æœ‰éœ€è¦ç†è§£ç”¨æˆ·æ„å›¾çš„äº¤äº’

#### è·¯å¾„ 2ï¼šç³»ç»Ÿå®šæ—¶ä»»åŠ¡è°ƒç”¨ï¼ˆç›´æ¥è°ƒç”¨ä¸šåŠ¡æ¨¡å—ï¼‰

```
ç³»ç»Ÿå®šæ—¶ â†’ ç¡®å®šæ€§ä»»åŠ¡ï¼Œæ— éœ€ ReAct

Backend (Celery Beat è°ƒåº¦å™¨)
  â†’ Celery Workerï¼ˆæ‰§è¡Œå™¨ï¼‰
  â†’ modules/ (ç›´æ¥ Python å¯¼å…¥)
  â†’ Backend Services
  â†’ æ•°æ®åº“/S3
```

**é€‚ç”¨åœºæ™¯**ï¼š
- æ¯ 6 å°æ—¶è‡ªåŠ¨æŠ“å–å¹¿å‘Šæ•°æ®
- æ¯å¤© 9:00 è‡ªåŠ¨ç”ŸæˆæŠ¥å‘Š
- æ¯å°æ—¶è‡ªåŠ¨æ£€æµ‹å¼‚å¸¸
- æ¯å¤© 2:00 è‡ªåŠ¨æ£€æŸ¥ Token æœ‰æ•ˆæœŸ

**ä¸ºä»€ä¹ˆå®šæ—¶ä»»åŠ¡ä¸é€šè¿‡ ReAct Agentï¼Ÿ**
- âŒ ReAct Agent æ˜¯å¯¹è¯å¼çš„ï¼Œä¸“æ³¨äºè‡ªä¸»è§„åˆ’å’Œæ‰§è¡Œ
- âŒ å®šæ—¶ä»»åŠ¡æ˜¯ç¡®å®šæ€§çš„ï¼Œä¸éœ€è¦ ReAct å¾ªç¯
- âœ… Celery Worker ç›´æ¥å¯¼å…¥ modules/ æ›´é«˜æ•ˆ
- âœ… å‡å°‘ç½‘ç»œå¼€é”€å’Œå»¶è¿Ÿ

---

## å¯¹è¯æµç¨‹ç¤ºä¾‹ï¼ˆConversation Flow Examplesï¼‰

### ç¤ºä¾‹ 1ï¼šå¤æ‚ä»»åŠ¡ - ç”Ÿæˆç´ æå¹¶åˆ›å»ºå¹¿å‘Šï¼ˆå¸¦ Human-in-the-Loopï¼‰

```
ç”¨æˆ·: "å¸®æˆ‘ç”Ÿæˆç´ æå¹¶åˆ›å»ºå¹¿å‘Šï¼Œé¢„ç®— $100"

Step 1: Planner
  Agent: åˆ†æç”¨æˆ·æ„å›¾
  â†’ éœ€è¦ç”Ÿæˆç´ æï¼ˆCreative Toolsï¼‰
  â†’ éœ€è¦åˆ›å»ºå¹¿å‘Šï¼ˆCampaign Tools + MCP Toolsï¼‰
  â†’ ç¼ºå°‘äº§å“ä¿¡æ¯

Step 2: Evaluator
  Agent: åˆ¤æ–­æ˜¯å¦éœ€è¦äººå·¥
  â†’ ç¼ºå°‘äº§å“é“¾æ¥ï¼Œéœ€è¦ç”¨æˆ·è¾“å…¥

Step 3: Human-in-the-Loop
  è¿”å›ç”¨æˆ·:
    "å¥½çš„ï¼äº§å“é“¾æ¥æ˜¯ä»€ä¹ˆï¼Ÿ
     [è¾“å…¥æ¡†]
     âŒ å–æ¶ˆ"

ç”¨æˆ·è¾“å…¥: "https://example.com/product"

Step 4: Planner (Round 2)
  Agent: ç»§ç»­è§„åˆ’
  â†’ æå–äº§å“ä¿¡æ¯
  â†’ ç”Ÿæˆç´ æ
  â†’ é£æ ¼å‚æ•°æ¨¡ç³Š

Step 5: Evaluator (Round 2)
  Agent: åˆ¤æ–­æ˜¯å¦éœ€è¦äººå·¥
  â†’ é£æ ¼æ¨¡ç³Šï¼Œæä¾›é€‰é¡¹

Step 6: Human-in-the-Loop (Round 2)
  è¿”å›ç”¨æˆ·:
    "è¯·é€‰æ‹©ç´ æé£æ ¼ï¼š
     1ï¸âƒ£ ç°ä»£ç®€çº¦
     2ï¸âƒ£ æ´»åŠ›å¤šå½©
     3ï¸âƒ£ é«˜ç«¯å¥¢å
     â• å…¶ä»–
     âŒ å–æ¶ˆ"

ç”¨æˆ·é€‰æ‹©: "1ï¸âƒ£"

Step 7: Act (Round 3)
  Agent: æ‰§è¡Œç”Ÿæˆ
  â†’ è°ƒç”¨ extract_product_info_tool(url)  # Agent Custom Tool
  â†’ è°ƒç”¨ generate_image_tool(product_info, "modern")  # Agent Custom Tool
  â†’ è°ƒç”¨ save_creative(image_url)  # MCP Server Tool

Step 8: Memory
  Agent: ä¿å­˜çŠ¶æ€
  â†’ creative_id = "creative-123"

Step 9: Perceive
  Agent: è¯„ä¼°è¿›åº¦
  â†’ ç´ æå®Œæˆï¼Œä½†è¿˜éœ€åˆ›å»ºå¹¿å‘Š

Step 10: Planner (Round 4)
  Agent: ç»§ç»­è§„åˆ’
  â†’ åˆ›å»ºå¹¿å‘Š

Step 11: Evaluator (Round 4)
  Agent: åˆ¤æ–­æ˜¯å¦éœ€è¦äººå·¥
  â†’ æ¶‰åŠèŠ±è´¹ï¼Œéœ€è¦ç¡®è®¤

Step 12: Human-in-the-Loop (Round 4)
  è¿”å›ç”¨æˆ·:
    "ç´ æå·²ç”Ÿæˆï¼ç°åœ¨åˆ›å»ºå¹¿å‘Šï¼š
     
     [æ˜¾ç¤ºç´ æé¢„è§ˆ]
     
     å¹¿å‘Šè®¾ç½®ï¼š
     - é¢„ç®—ï¼š$100/å¤©
     - ç›®æ ‡ï¼šè½¬åŒ–
     - æ–‡æ¡ˆï¼š[AI ç”Ÿæˆçš„æ–‡æ¡ˆ]
     - å—ä¼—ï¼š25-35 å²å¥³æ€§ï¼Œå…´è¶£ï¼šæ—¶å°š
     
     ç¡®è®¤åˆ›å»ºå—ï¼Ÿ
     âœ… ç¡®è®¤
     âœï¸ ä¿®æ”¹è®¾ç½®
     âŒ å–æ¶ˆ"

ç”¨æˆ·é€‰æ‹©: "âœ…"

Step 13: Act (Round 5)
  Agent: æ‰§è¡Œåˆ›å»º
  â†’ è°ƒç”¨ generate_ad_copy_tool(product_info)  # Agent Custom Tool
  â†’ è°ƒç”¨ suggest_targeting_tool(product_info)  # Agent Custom Tool
  â†’ è°ƒç”¨ create_campaign(creative_id, settings)  # MCP Server Tool

Step 14: Memory
  Agent: ä¿å­˜çŠ¶æ€
  â†’ campaign_id = "123456789"

Step 15: Perceive
  Agent: è¯„ä¼°è¿›åº¦
  â†’ ä»»åŠ¡å®Œæˆ

è¿”å›ç”¨æˆ·:
  "âœ… ç´ æå’Œå¹¿å‘Šéƒ½å·²å®Œæˆï¼
   
   ç´ æ ID: creative-123
   Campaign ID: 123456789
   
   å¹¿å‘Šå°†åœ¨å®¡æ ¸é€šè¿‡åå¼€å§‹æŠ•æ”¾"
```

### ç¤ºä¾‹ 2ï¼šæ˜ç¡®ä»»åŠ¡ - æŸ¥çœ‹æŠ¥è¡¨ï¼ˆæ— éœ€ Human-in-the-Loopï¼‰

```
ç”¨æˆ·: "æˆ‘çš„å¹¿å‘Šè¡¨ç°å¦‚ä½•ï¼Ÿ"

Step 1: Planner
  Agent: åˆ†æç”¨æˆ·æ„å›¾
  â†’ éœ€è¦æŸ¥çœ‹æŠ¥è¡¨ï¼ˆPerformance Tools + MCP Toolsï¼‰

Step 2: Evaluator
  Agent: åˆ¤æ–­æ˜¯å¦éœ€è¦äººå·¥
  â†’ æŸ¥çœ‹æŠ¥è¡¨æ— é£é™©ï¼Œè‡ªåŠ¨æ‰§è¡Œ

Step 3: Act
  Agent: æ‰§è¡ŒæŸ¥è¯¢
  â†’ è°ƒç”¨ fetch_ad_data()  # MCP Server Tool
  â†’ è°ƒç”¨ analyze_performance_tool(data)  # Agent Custom Tool
  â†’ è°ƒç”¨ detect_anomaly_tool(data)  # Agent Custom Tool
  â†’ è°ƒç”¨ generate_recommendations_tool(analysis)  # Agent Custom Tool

Step 4: Memory
  Agent: ä¿å­˜åˆ†æç»“æœ

Step 5: Perceive
  Agent: è¯„ä¼°è¿›åº¦
  â†’ ä»»åŠ¡å®Œæˆ

è¿”å›ç”¨æˆ·:
  "ğŸ“Š ä»Šæ—¥è¡¨ç°ï¼š
   - èŠ±è´¹ï¼š$87.50
   - ROASï¼š2.8ï¼ˆç•¥ä½äºç›®æ ‡ 3.0ï¼‰
   
   âš ï¸ å‘ç°é—®é¢˜ï¼š
   - Adset "51-65 å²" è¡¨ç°è¾ƒå·®ï¼ˆROAS 1.8ï¼‰
   
   ğŸ’¡ å»ºè®®ï¼š
   - æš‚åœä½æ•ˆ Adset
   - å¢åŠ é«˜æ•ˆ Adset é¢„ç®—
   
   éœ€è¦æˆ‘æ‰§è¡Œä¼˜åŒ–å—ï¼Ÿ"
```

### ç¤ºä¾‹ 3ï¼šæ™ºèƒ½è§„åˆ’ - äº§å“å–å¾—ä¸å¥½

```
ç”¨æˆ·: "è¿™ä¸ªäº§å“å–å¾—ä¸å¥½"

Step 1: Planner
  Agent: åˆ†æç”¨æˆ·æ„å›¾
  â†’ ç”¨æˆ·å¯èƒ½éœ€è¦ï¼š
    1. æŸ¥çœ‹æŠ¥è¡¨ï¼ˆPerformance Toolsï¼‰
    2. åˆ†æå¸‚åœºï¼ˆMarket Toolsï¼‰
    3. ä¼˜åŒ–å¹¿å‘Šï¼ˆCampaign Toolsï¼‰
  â†’ å†³å®šå…ˆæŸ¥çœ‹æ•°æ®ï¼Œå†åˆ†æåŸå› 

Step 2: Evaluator
  Agent: åˆ¤æ–­æ˜¯å¦éœ€è¦äººå·¥
  â†’ åˆ†ææ— é£é™©ï¼Œè‡ªåŠ¨æ‰§è¡Œ

Step 3: Act (Round 1)
  Agent: æŸ¥çœ‹æŠ¥è¡¨
  â†’ è°ƒç”¨ fetch_ad_data()  # MCP Server Tool
  â†’ è°ƒç”¨ analyze_performance_tool(data)  # Agent Custom Tool

Step 4: Perceive (Round 1)
  Agent: è¯„ä¼°è¿›åº¦
  â†’ å‘ç° CTR åä½ï¼Œéœ€è¦åˆ†æå¸‚åœº

Step 5: Planner (Round 2)
  Agent: ç»§ç»­è§„åˆ’
  â†’ åˆ†æç«å“å’Œå¸‚åœº

Step 6: Act (Round 2)
  Agent: å¸‚åœºåˆ†æ
  â†’ è°ƒç”¨ google_search("ç«å“")  # LangChain Tool
  â†’ è°ƒç”¨ analyze_competitor_tool(competitor_data)  # Agent Custom Tool
  â†’ è°ƒç”¨ analyze_trends_tool(market_data)  # Agent Custom Tool

Step 7: Perceive (Round 2)
  Agent: è¯„ä¼°è¿›åº¦
  â†’ æ‰¾åˆ°åŸå› ï¼Œç”Ÿæˆå»ºè®®

è¿”å›ç”¨æˆ·:
  "æˆ‘æ¥å¸®ä½ åˆ†æä¸€ä¸‹ã€‚
   
   ğŸ“Š è¿‘ 7 å¤©æ•°æ®ï¼š
   - CTR: 0.8%ï¼ˆåä½ï¼‰
   - CPA: $45ï¼ˆåé«˜ï¼‰
   
   ğŸ” ç«å“åˆ†æï¼š
   - ç«å“å¹³å‡ CTR: 1.5%
   - ä½ çš„ç´ æé£æ ¼è¾ƒä¼ ç»Ÿ
   
   ğŸ’¡ å»ºè®®ï¼š
   1. ç”Ÿæˆæ–°çš„ç´ æï¼ˆæ›´ç°ä»£çš„é£æ ¼ï¼‰
   2. è°ƒæ•´ç›®æ ‡å—ä¼—
   3. ä¼˜åŒ–è½åœ°é¡µ
   
   æˆ‘å¯ä»¥å¸®ä½ æ‰§è¡Œè¿™äº›ä¼˜åŒ–ï¼Œéœ€è¦å—ï¼Ÿ"
```

---

## æ¨¡å—èŒè´£ï¼ˆModule Responsibilitiesï¼‰

### 1. Web Platformï¼ˆWeb å¹³å° - ç”¨æˆ·å…¥å£ + æ ¸å¿ƒæ•°æ®ç®¡ç†ï¼‰

**èŒè´£**ï¼š
- **ç”¨æˆ·å…¥å£**ï¼šæä¾› Web ç•Œé¢ï¼Œç”¨æˆ·é€šè¿‡æ­¤è®¿é—®ç³»ç»Ÿ
- **åµŒå…¥å¼å¯¹è¯ç•Œé¢**ï¼šåœ¨ä¸»ç«™å†…åµŒ AI Agent å¯¹è¯çª—å£
- **WebSocket é€šä¿¡**ï¼šå‰ç«¯ä¸ AI Agent çš„å®æ—¶é€šä¿¡
- ç”¨æˆ·è®¤è¯ã€æˆæƒã€è®¢é˜…ç®¡ç†
- æ‰€æœ‰ä¸šåŠ¡æ•°æ®çš„å­˜å‚¨å’Œç®¡ç†
- å®ç° MCP Serverï¼Œä¸º AI Agent æä¾›æ•°æ®è®¿é—®å·¥å…·

**å‰ç«¯æ¨¡å—**ï¼š
- Dashboard ä»ªè¡¨æ¿
- ç´ æç®¡ç†ç•Œé¢
- æŠ¥è¡¨ç®¡ç†ç•Œé¢
- è½åœ°é¡µç®¡ç†ç•Œé¢
- æŠ•æ”¾ç®¡ç†ç•Œé¢
- **åµŒå…¥å¼ AI Agent å¯¹è¯çª—å£**ï¼ˆå³ä¸‹è§’ï¼Œå¯å±•å¼€/æ”¶èµ·ï¼‰

**åç«¯æ¨¡å—**ï¼š
- ç”¨æˆ·è®¤è¯æ¨¡å—
- è®¢é˜…è®¡è´¹æ¨¡å—
- ç´ æç®¡ç†æ¨¡å—ï¼šå­˜å‚¨ç´ æå…ƒæ•°æ®å’Œæ–‡ä»¶
- æŠ¥è¡¨æ•°æ®æ¨¡å—ï¼šå­˜å‚¨å¹¿å‘Šå¹³å°æ•°æ®ï¼ˆæ—¶åºæ•°æ®ï¼‰
- è½åœ°é¡µç®¡ç†æ¨¡å—ï¼šå­˜å‚¨è½åœ°é¡µé…ç½®å’Œæ–‡ä»¶
- æŠ•æ”¾ç®¡ç†æ¨¡å—ï¼šå­˜å‚¨ Campaign/Adset/Ad æ•°æ®
- **MCP Server**ï¼šæä¾›å·¥å…·ç»™ AI Agent
- **WebSocket Server**ï¼šå¤„ç†å®æ—¶å¯¹è¯

**æŠ€æœ¯æ ˆ**ï¼š
- å‰ç«¯ï¼šNext.js 14 + TypeScript + Tailwind CSS + Shadcn/ui
- å¯¹è¯ç•Œé¢ï¼š**Vercel AI SDK**ï¼ˆ`ai` åŒ…ï¼‰+ React
- åç«¯ï¼šFastAPI (Python 3.12+)
- æ•°æ®åº“ï¼šMySQL 8.4
- ç¼“å­˜ï¼šRedis
- å­˜å‚¨ï¼šAWS S3
- é€šä¿¡ï¼šHTTP Streamingï¼ˆå‰ç«¯ â†” AI Agentï¼‰+ MCPï¼ˆAI Agent â†” Portalï¼‰

---

### 2. AI Orchestratorï¼ˆAI åè°ƒå™¨ - ReAct Agent æ¶æ„ï¼‰

**èŒè´£**ï¼š
- æä¾›ç»Ÿä¸€çš„å¯¹è¯å…¥å£
- ä½¿ç”¨ ReAct æ¨¡å¼è‡ªä¸»è§„åˆ’å’Œæ‰§è¡Œä»»åŠ¡
- æ™ºèƒ½åˆ¤æ–­æ˜¯å¦éœ€è¦ Human-in-the-Loop
- ç®¡ç†å¯¹è¯ä¸Šä¸‹æ–‡å’ŒçŠ¶æ€
- é€šè¿‡ 3 ç±» Tools å®Œæˆå„ç§ä»»åŠ¡
- é€šè¿‡ MCP ä¸ Backend é€šä¿¡

**æ ¸å¿ƒç»„ä»¶**ï¼š

#### 2.1 ReAct Agent æ ¸å¿ƒ

**Plannerï¼ˆè§„åˆ’å™¨ï¼‰**
- ä½¿ç”¨ Gemini 2.5 ç†è§£ç”¨æˆ·æ„å›¾
- åˆ†è§£ä»»åŠ¡ä¸ºå…·ä½“æ­¥éª¤
- é€‰æ‹©éœ€è¦çš„ Tools
- åˆ¶å®šæ‰§è¡Œè®¡åˆ’

**Evaluatorï¼ˆè¯„ä¼°å™¨ï¼‰**
- åˆ¤æ–­æ˜¯å¦éœ€è¦ Human-in-the-Loop
- æ£€æŸ¥æ“ä½œé£é™©ï¼ˆèŠ±è´¹ã€åˆ é™¤ç­‰ï¼‰
- æ£€æŸ¥å‚æ•°æ¨¡ç³Šåº¦
- å†³å®šäº¤äº’æ–¹å¼ï¼ˆç¡®è®¤/é€‰é¡¹/è¾“å…¥ï¼‰

**Human-in-the-Loop Handlerï¼ˆäººå·¥ä»‹å…¥å¤„ç†å™¨ï¼‰**
- ç”Ÿæˆç¡®è®¤è¯·æ±‚
- ç”Ÿæˆé€‰é¡¹ï¼ˆé¢„è®¾ + å…¶ä»– + å–æ¶ˆï¼‰
- ç”Ÿæˆè¾“å…¥è¯·æ±‚
- å¤„ç†ç”¨æˆ·å“åº”

**Memoryï¼ˆè®°å¿†ï¼‰**
- ä½¿ç”¨ Redis å­˜å‚¨å¯¹è¯å†å²
- ç»´æŠ¤ Agent æ‰§è¡ŒçŠ¶æ€
- ä¿å­˜å·¥å…·è°ƒç”¨ç»“æœ
- ç®¡ç†ä¼šè¯ä¸Šä¸‹æ–‡

#### 2.2 3 ç±» Tools

**1. LangChain å†…ç½® Tools**
- `google_search`ï¼šæœç´¢ç«å“ä¿¡æ¯
- `calculator`ï¼šè®¡ç®—æŒ‡æ ‡
- èŒè´£ï¼šæä¾›é€šç”¨å·¥å…·èƒ½åŠ›

**2. Agent è‡ªå®šä¹‰ Toolsï¼ˆå¯è°ƒç”¨å¤§æ¨¡å‹ï¼‰**

Creative Tools:
- `generate_image_tool`ï¼šç”Ÿæˆå›¾ç‰‡ï¼ˆGemini Imagenï¼‰
- `generate_video_tool`ï¼šç”Ÿæˆè§†é¢‘ï¼ˆGemini Veoï¼‰
- `analyze_creative_tool`ï¼šåˆ†æç´ æï¼ˆGemini Visionï¼‰
- `extract_product_info_tool`ï¼šæå–äº§å“ä¿¡æ¯ï¼ˆGeminiï¼‰

Performance Tools:
- `analyze_performance_tool`ï¼šAI åˆ†ææ€§èƒ½ï¼ˆGeminiï¼‰
- `detect_anomaly_tool`ï¼šæ£€æµ‹å¼‚å¸¸ï¼ˆGeminiï¼‰
- `generate_recommendations_tool`ï¼šç”Ÿæˆå»ºè®®ï¼ˆGeminiï¼‰

Campaign Tools:
- `optimize_budget_tool`ï¼šä¼˜åŒ–é¢„ç®—å»ºè®®ï¼ˆGeminiï¼‰
- `generate_ad_copy_tool`ï¼šç”Ÿæˆå¹¿å‘Šæ–‡æ¡ˆï¼ˆGeminiï¼‰
- `suggest_targeting_tool`ï¼šå»ºè®®å—ä¼—å®šå‘ï¼ˆGeminiï¼‰

Landing Page Tools:
- `generate_page_content_tool`ï¼šç”Ÿæˆé¡µé¢å†…å®¹ï¼ˆGeminiï¼‰
- `translate_content_tool`ï¼šç¿»è¯‘å†…å®¹ï¼ˆGeminiï¼‰
- `optimize_copy_tool`ï¼šä¼˜åŒ–æ–‡æ¡ˆï¼ˆGeminiï¼‰

Market Tools:
- `analyze_competitor_tool`ï¼šåˆ†æç«å“ï¼ˆGeminiï¼‰
- `analyze_trends_tool`ï¼šåˆ†æè¶‹åŠ¿ï¼ˆGeminiï¼‰
- `generate_strategy_tool`ï¼šç”Ÿæˆç­–ç•¥ï¼ˆGeminiï¼‰

èŒè´£ï¼šå°è£… AI èƒ½åŠ›ï¼Œæä¾›æ™ºèƒ½åˆ†æå’Œç”Ÿæˆ

**3. MCP Server Toolsï¼ˆBackend APIï¼‰**
- `save_creative`, `get_creative`, `list_creatives`
- `fetch_ad_data`, `get_historical_data`, `save_report`
- `create_campaign`, `update_campaign`, `pause_campaign`
- `save_landing_page`, `get_landing_page`, `upload_to_s3`
- `fetch_competitor_data`, `fetch_market_data`, `save_analysis`

èŒè´£ï¼šæ•°æ®äº¤äº’ï¼Œä¸åŒ…å« AI é€»è¾‘

#### 2.3 ä¸šåŠ¡é€»è¾‘å®ç°å±‚ï¼ˆmodules/ï¼‰

**ad_creative/**
- ç´ æç”Ÿæˆå’Œåˆ†æ
- è¢« Creative Tools è°ƒç”¨

**ad_performance/**
- æ€§èƒ½åˆ†æå’ŒæŠ¥è¡¨
- è¢« Performance Tools è°ƒç”¨

**campaign_automation/**
- å¹¿å‘ŠæŠ•æ”¾è‡ªåŠ¨åŒ–
- è¢« Campaign Tools è°ƒç”¨

**landing_page/**
- è½åœ°é¡µç”Ÿæˆ
- è¢« Landing Page Tools è°ƒç”¨

**market_insights/**
- å¸‚åœºæ´å¯Ÿ
- è¢« Market Tools è°ƒç”¨

æ³¨ï¼šmodules/ ä¸å†æ˜¯ç‹¬ç«‹çš„ Sub-Agentsï¼Œè€Œæ˜¯è¢« Agent Custom Tools è°ƒç”¨çš„ä¸šåŠ¡é€»è¾‘å®ç°å±‚

**æŠ€æœ¯æ ˆ**ï¼š
- Agent Framework: Strands Agents (intelligent tool orchestration)
- Primary Models: AWS Bedrock (Claude 4.5 Sonnet, Qwen3 235B, Nova 2 Lite)
- Fallback: Gemini 2.5 Flash/Pro
- Web Search: Amazon Nova Search â†’ Google Grounding (automatic fallback)
- Image Generation: Qwen-Image (SageMaker) / Bedrock Stable Diffusion
- Video Generation: Wan2.2 (SageMaker)
- Storage: AWS S3 + Presigned URLs (1-hour expiration)
- Memory: Redis (conversation context)
- MCP: Client implementation (Backend communication)
- Frontend Communication: HTTP POST + SSE (real-time, no buffering)

---

## é€šä¿¡åè®®ï¼ˆCommunication Protocolï¼‰

### å‰ç«¯ â†” AI Orchestrator

**åè®®**ï¼šHTTP POST + SSEï¼ˆServer-Sent Eventsï¼‰

**æµç¨‹**ï¼š
1. å‰ç«¯å‘é€æ¶ˆæ¯ï¼š`POST /api/chat`
2. AI Orchestrator è¿”å› SSE å®æ—¶æµå¼å“åº”ï¼ˆæ— ç¼“å†²ï¼‰
3. å‰ç«¯æ¥æ”¶æµå¼æ¶ˆæ¯å¹¶æ¸²æŸ“ï¼ˆå·¥å…·åç§°æ˜ å°„ï¼‰

**æµå¼å“åº”ç‰¹æ€§**ï¼š
- ç›´æ¥è½¬å‘æ¨¡å‹delta.textï¼Œæ— æ–‡æœ¬ç¼“å†²
- çœŸå®åæ˜ æ¨¡å‹è¾“å‡ºç²’åº¦
- é™ä½å»¶è¿Ÿï¼Œæå‡ç”¨æˆ·ä½“éªŒ

**æ¶ˆæ¯æ ¼å¼**ï¼š
```typescript
// å‰ç«¯å‘é€
{
  message: string,
  session_id: string,
  user_id: string
}

// AI Orchestrator è¿”å›ï¼ˆSSEï¼‰
data: {"type": "text", "content": "æ­£åœ¨"}  // Real-time, no buffering
data: {"type": "text", "content": "ç”Ÿæˆ"}
data: {"type": "text", "content": "ç´ æ..."}
data: {"type": "action", "tool": "web_search"}  // Internal tool name
data: {"type": "observation", "tool": "web_search", "success": true}
data: {"type": "done"}
```

**å‰ç«¯å·¥å…·åç§°æ˜ å°„**ï¼š
```typescript
// AgentProcessingCard.tsx
const toolNameMap = {
  'web_search': 'äº’è”ç½‘æœç´¢',
  'generate_image_tool': 'å›¾ç‰‡ç”Ÿæˆ',
  'calculator': 'è®¡ç®—å™¨'
}
// User sees: "äº’è”ç½‘æœç´¢" instead of "web_search"
```

### AI Orchestrator â†” Backend

**åè®®**ï¼šMCP (Model Context Protocol)

**Backend ä½œä¸º MCP Server**ï¼š
- æä¾›æ•°æ®è®¿é—®å·¥å…·ï¼ˆget_creativesã€get_reports ç­‰ï¼‰
- æä¾›æ•°æ®å†™å…¥å·¥å…·ï¼ˆcreate_campaignã€save_creative ç­‰ï¼‰
- åªè´Ÿè´£æ•°æ®äº¤äº’ï¼Œä¸åŒ…å« AI é€»è¾‘

**AI Orchestrator ä½œä¸º MCP Client**ï¼š
- è°ƒç”¨ Backend æä¾›çš„ MCP Server Tools
- è¯»å–å’Œå†™å…¥ä¸šåŠ¡æ•°æ®
- ä¸ç›´æ¥è®¿é—®æ•°æ®åº“

**å·¥å…·è°ƒç”¨ç¤ºä¾‹**ï¼š
```python
# AI Orchestrator è°ƒç”¨ MCP Tool
result = await mcp_client.call_tool(
    "save_creative",
    {
        "user_id": "user-123",
        "image_url": "https://...",
        "metadata": {...}
    }
)
```

### ReAct Agent å†…éƒ¨é€šä¿¡

ReAct Agent é€šè¿‡ **Planner** è‡ªä¸»å†³å®šå·¥å…·è°ƒç”¨é¡ºåºï¼š

```
ç”¨æˆ·è¾“å…¥
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Planner        â”‚ â—„â”€â”€â”€ ä½¿ç”¨ Gemini è§„åˆ’ä»»åŠ¡
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Evaluator      â”‚ â—„â”€â”€â”€ åˆ¤æ–­æ˜¯å¦éœ€è¦äººå·¥
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Act            â”‚ â—„â”€â”€â”€ è°ƒç”¨ 3 ç±» Tools
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”œâ”€â”€â–º LangChain Tools (google_search, calculator)
    â”‚
    â”œâ”€â”€â–º Agent Custom Tools (generate_image_tool, analyze_performance_tool)
    â”‚
    â””â”€â”€â–º MCP Server Tools (save_creative, create_campaign)
         â”‚
         â–¼
    Memory â†’ Perceive â†’ è¿”å›ç”¨æˆ·æˆ–ç»§ç»­å¾ªç¯
```

**ReAct å·¥ä½œæµç¨‹**ï¼š

```python
# ç¤ºä¾‹ï¼šç”¨æˆ·è¯´"å¸®æˆ‘ç”Ÿæˆç´ æå¹¶åˆ›å»ºå¹¿å‘Š"

# Round 1
plan = await planner.plan(user_message)
# â†’ éœ€è¦ï¼šæå–äº§å“ä¿¡æ¯ â†’ ç”Ÿæˆç´ æ â†’ åˆ›å»ºå¹¿å‘Š

needs_human = await evaluator.needs_human_input(plan)
# â†’ ç¼ºå°‘äº§å“é“¾æ¥ï¼Œéœ€è¦ç”¨æˆ·è¾“å…¥

return UserInputRequest("äº§å“é“¾æ¥æ˜¯ä»€ä¹ˆï¼Ÿ")

# ç”¨æˆ·è¾“å…¥åï¼ŒRound 2
plan = await planner.plan(context)
# â†’ ç”Ÿæˆç´ æ

needs_human = await evaluator.needs_human_input(plan)
# â†’ é£æ ¼æ¨¡ç³Šï¼Œæä¾›é€‰é¡¹

return UserInputRequest("è¯·é€‰æ‹©é£æ ¼", options=[...])

# ç”¨æˆ·é€‰æ‹©åï¼ŒRound 3
await act([
    extract_product_info_tool(url),
    generate_image_tool(product_info, style),
    save_creative(image_url)
])

# Round 4
plan = await planner.plan(context)
# â†’ åˆ›å»ºå¹¿å‘Š

needs_human = await evaluator.needs_human_input(plan)
# â†’ æ¶‰åŠèŠ±è´¹ï¼Œéœ€è¦ç¡®è®¤

return ConfirmationRequest("ç¡®è®¤åˆ›å»ºå¹¿å‘Šï¼Ÿ", details={...})

# ç”¨æˆ·ç¡®è®¤åï¼ŒRound 5
await act([
    generate_ad_copy_tool(product_info),
    suggest_targeting_tool(product_info),
    create_campaign(creative_id, settings)
])

return "âœ… ç´ æå’Œå¹¿å‘Šéƒ½å·²å®Œæˆï¼"
```

---

## Skills åŠ¨æ€åŠ è½½ï¼ˆæœªæ¥ä¼˜åŒ–ï¼‰

**æ³¨æ„**ï¼šå½“å‰å®ç°åŠ è½½æ‰€æœ‰ Toolsã€‚å½“ Tools æ•°é‡è¿‡å¤šï¼ˆ>50 ä¸ªï¼‰æ—¶ï¼Œå¯ä»¥å®ç° Skills åŠ¨æ€åŠ è½½æœºåˆ¶ã€‚

### Skills å®šä¹‰

å°† Tools åˆ†ç»„ä¸º 5 ä¸ª Skillsï¼š

**Creative Skillï¼ˆç´ æåˆ›æ„ï¼‰**
- è§¦å‘å…³é”®è¯ï¼šç´ æã€å›¾ç‰‡ã€è§†é¢‘ã€åˆ›æ„ã€è®¾è®¡
- LangChain Tools: æ— 
- Agent Custom Tools: generate_image_tool, analyze_creative_tool ç­‰
- MCP Server Tools: save_creative, get_creative ç­‰

**Performance Skillï¼ˆæ€§èƒ½åˆ†æï¼‰**
- è§¦å‘å…³é”®è¯ï¼šè¡¨ç°ã€æ•°æ®ã€åˆ†æã€æŠ¥è¡¨ã€ROASã€CTR
- LangChain Tools: calculator
- Agent Custom Tools: analyze_performance_tool, detect_anomaly_tool ç­‰
- MCP Server Tools: fetch_ad_data, save_report ç­‰

**Campaign Skillï¼ˆå¹¿å‘ŠæŠ•æ”¾ï¼‰**
- è§¦å‘å…³é”®è¯ï¼šå¹¿å‘Šã€æŠ•æ”¾ã€é¢„ç®—ã€Campaign
- LangChain Tools: æ— 
- Agent Custom Tools: optimize_budget_tool, generate_ad_copy_tool ç­‰
- MCP Server Tools: create_campaign, update_campaign ç­‰

**Landing Page Skillï¼ˆè½åœ°é¡µï¼‰**
- è§¦å‘å…³é”®è¯ï¼šè½åœ°é¡µã€é¡µé¢ã€ç½‘ç«™
- LangChain Tools: æ— 
- Agent Custom Tools: generate_page_content_tool, translate_content_tool ç­‰
- MCP Server Tools: save_landing_page, upload_to_s3 ç­‰

**Market Skillï¼ˆå¸‚åœºæ´å¯Ÿï¼‰**
- è§¦å‘å…³é”®è¯ï¼šç«å“ã€å¸‚åœºã€è¶‹åŠ¿ã€ç­–ç•¥
- LangChain Tools: google_search
- Agent Custom Tools: analyze_competitor_tool, analyze_trends_tool ç­‰
- MCP Server Tools: fetch_competitor_data, fetch_market_data ç­‰

### åŠ¨æ€åŠ è½½æµç¨‹

```
ç”¨æˆ·æ¶ˆæ¯
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 1: Skills è¯†åˆ«                 â”‚
â”‚  - ä½¿ç”¨ Gemini è¯†åˆ«éœ€è¦çš„ Skills     â”‚
â”‚  - ä¾‹å¦‚ï¼š"ç”Ÿæˆç´ æ" â†’ Creative Skill â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 2: Tools åŠ è½½                  â”‚
â”‚  - åªåŠ è½½ç›¸å…³ Skills çš„ Tools        â”‚
â”‚  - ä¾‹å¦‚ï¼šCreative Skill â†’ 10 ä¸ª Toolsâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 3: ReAct å¾ªç¯                  â”‚
â”‚  - ä½¿ç”¨åŠ è½½çš„ Tools æ‰§è¡Œä»»åŠ¡         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä¼˜åŒ–æ•ˆæœ

**ä¸ä½¿ç”¨ Skills åŠ¨æ€åŠ è½½**ï¼š
- æ‰€æœ‰ Toolsï¼š50 ä¸ª
- LLM Contextï¼š~13,000 tokens

**ä½¿ç”¨ Skills åŠ¨æ€åŠ è½½**ï¼š
- å¹³å‡åŠ è½½ Toolsï¼š15-20 ä¸ª
- LLM Contextï¼š~6,600 tokensï¼ˆå‡å°‘ 49%ï¼‰
- å“åº”é€Ÿåº¦æå‡ 30%+
- Token æˆæœ¬é™ä½ 40%+

## æ•°æ®æµç¤ºä¾‹ï¼ˆData Flow Examplesï¼‰

### ç¤ºä¾‹ 1ï¼šç”¨æˆ·åˆ›å»ºå¹¿å‘Šï¼ˆReAct è‡ªä¸»è§„åˆ’ï¼‰

```
1. ç”¨æˆ· â†’ ReAct Agent: "å¸®æˆ‘ç”Ÿæˆç´ æå¹¶åˆ›å»ºå¹¿å‘Š"

2. ReAct Agent (Planner):
   - ç†è§£æ„å›¾ï¼šéœ€è¦ç”Ÿæˆç´ æ + åˆ›å»ºå¹¿å‘Š
   - è§„åˆ’æ­¥éª¤ï¼š
     Step 1: æå–äº§å“ä¿¡æ¯
     Step 2: ç”Ÿæˆç´ æ
     Step 3: åˆ›å»ºå¹¿å‘Š

3. ReAct Agent (Evaluator):
   - æ£€æŸ¥ï¼šç¼ºå°‘äº§å“é“¾æ¥
   - å†³å®šï¼šéœ€è¦ç”¨æˆ·è¾“å…¥

4. ReAct Agent â†’ ç”¨æˆ·: "äº§å“é“¾æ¥æ˜¯ä»€ä¹ˆï¼Ÿ"

5. ç”¨æˆ· â†’ ReAct Agent: "https://example.com/product"

6. ReAct Agent (Act):
   - è°ƒç”¨ extract_product_info_tool(url)  # Agent Custom Tool
   - è°ƒç”¨ generate_image_tool(product_info, style)  # Agent Custom Tool
   - è°ƒç”¨ save_creative(image_url)  # MCP Server Tool â†’ Backend

7. Backend:
   - ä¿å­˜ç´ æåˆ°æ•°æ®åº“
   - ä¸Šä¼ æ–‡ä»¶åˆ° S3
   - è¿”å› creative_id

8. ReAct Agent (Perceive):
   - ç´ æå®Œæˆï¼Œç»§ç»­åˆ›å»ºå¹¿å‘Š

9. ReAct Agent (Evaluator):
   - æ£€æŸ¥ï¼šæ¶‰åŠèŠ±è´¹
   - å†³å®šï¼šéœ€è¦ç”¨æˆ·ç¡®è®¤

10. ReAct Agent â†’ ç”¨æˆ·: "ç¡®è®¤åˆ›å»ºå¹¿å‘Šï¼Ÿ[æ˜¾ç¤ºè¯¦æƒ…]"

11. ç”¨æˆ· â†’ ReAct Agent: "ç¡®è®¤"

12. ReAct Agent (Act):
    - è°ƒç”¨ generate_ad_copy_tool(product_info)  # Agent Custom Tool
    - è°ƒç”¨ create_campaign(creative_id, settings)  # MCP Server Tool â†’ Backend

13. Backend:
    - åˆ›å»º Campaign è®°å½•
    - è°ƒç”¨ Meta API åˆ›å»ºå¹¿å‘Š
    - è¿”å› campaign_id

14. ReAct Agent â†’ ç”¨æˆ·: "âœ… ç´ æå’Œå¹¿å‘Šéƒ½å·²å®Œæˆï¼"
```

### ç¤ºä¾‹ 2ï¼šç”¨æˆ·æŸ¥çœ‹æŠ¥è¡¨å¹¶ä¼˜åŒ–ï¼ˆReAct è‡ªä¸»è§„åˆ’ï¼‰

```
1. ç”¨æˆ· â†’ ReAct Agent: "æˆ‘çš„å¹¿å‘Šè¡¨ç°å¦‚ä½•ï¼Ÿ"

2. ReAct Agent (Planner):
   - ç†è§£æ„å›¾ï¼šæŸ¥çœ‹æŠ¥è¡¨
   - è§„åˆ’æ­¥éª¤ï¼š
     Step 1: è·å–å¹¿å‘Šæ•°æ®
     Step 2: AI åˆ†æ
     Step 3: ç”Ÿæˆå»ºè®®

3. ReAct Agent (Evaluator):
   - æ£€æŸ¥ï¼šæŸ¥çœ‹æŠ¥è¡¨æ— é£é™©
   - å†³å®šï¼šè‡ªåŠ¨æ‰§è¡Œ

4. ReAct Agent (Act):
   - è°ƒç”¨ fetch_ad_data()  # MCP Server Tool â†’ Backend
   - è°ƒç”¨ analyze_performance_tool(data)  # Agent Custom Tool
   - è°ƒç”¨ generate_recommendations_tool(analysis)  # Agent Custom Tool

5. ReAct Agent â†’ ç”¨æˆ·: "CPA åé«˜ï¼Œå»ºè®®æš‚åœ Adset X"

6. ç”¨æˆ· â†’ ReAct Agent: "å¥½çš„ï¼Œæ‰§è¡Œ"

7. ReAct Agent (Planner):
   - ç†è§£æ„å›¾ï¼šæš‚åœ Adset
   - è§„åˆ’æ­¥éª¤ï¼šæš‚åœ Adset X

8. ReAct Agent (Evaluator):
   - æ£€æŸ¥ï¼šæš‚åœæ“ä½œæ˜¯é‡è¦æ“ä½œ
   - å†³å®šï¼šéœ€è¦ç¡®è®¤

9. ReAct Agent â†’ ç”¨æˆ·: "ç¡®è®¤æš‚åœ Adset Xï¼Ÿ"

10. ç”¨æˆ· â†’ ReAct Agent: "ç¡®è®¤"

11. ReAct Agent (Act):
    - è°ƒç”¨ pause_campaign(adset_id)  # MCP Server Tool â†’ Backend

12. Backend:
    - æ›´æ–°æ•°æ®åº“çŠ¶æ€
    - è°ƒç”¨ Meta API æš‚åœ Adset
    - è¿”å›æˆåŠŸ

13. ReAct Agent â†’ ç”¨æˆ·: "âœ… Adset X å·²æš‚åœ"
```

---

## æŠ€æœ¯æ ˆæ€»ç»“ï¼ˆTechnology Stack Summaryï¼‰

### å‰ç«¯
- Next.js 14 + TypeScript
- Tailwind CSS + Shadcn/ui
- HTTP POST + SSEï¼ˆæµå¼å¯¹è¯ï¼‰
- React Queryï¼ˆæ•°æ®è·å–ï¼‰

### Backend (FastAPI)
- FastAPI (Python 3.12+)
- SQLAlchemy 2.0 + MySQL 8.4
- Redisï¼ˆç¼“å­˜ + ä¼šè¯ï¼‰
- MCP Serverï¼ˆæä¾› MCP Server Toolsï¼‰
- Celeryï¼ˆå®šæ—¶ä»»åŠ¡ï¼‰

### AI Orchestrator
- Strands Agents Framework (multi-provider support)
- AWS Bedrock (Claude 4.5 Sonnet, Qwen3 235B, Nova 2 Lite)
- Gemini 2.5 Flash/Pro (fallback)
- Redis (Memory storage)
- MCP Client (Backend communication)
- S3 Client (presigned URLs for media)

### Built-in Tools
- **Strands Built-in**: web_search (unified, auto-fallback), calculator, datetime
- **Creative Tools**: 10+ AI-powered tools (Bedrock, SageMaker, Gemini)
- **MCP Server**: 25+ data interaction tools (Backend API)

### Web Search Strategy
- **Primary**: Amazon Nova Search (Bedrock Converse + nova_grounding, ~5-6s)
- **Fallback**: Google Grounding (Gemini API, ~3-4s)
- **Frontend Display**: "äº’è”ç½‘æœç´¢" (tool name mapping)
- **Transparent**: Automatic provider selection, user doesn't see details

### æ•°æ®åº“
- MySQL 8.4ï¼ˆä¸šåŠ¡æ•°æ®ï¼‰
- Redisï¼ˆç¼“å­˜ + ä¼šè¯ + Memoryï¼‰

### å­˜å‚¨
- AWS S3ï¼ˆç´ ææ–‡ä»¶ã€è½åœ°é¡µæ–‡ä»¶ã€ç”Ÿæˆå†…å®¹ï¼‰
- Presigned URLs (1-hour expiration for secure browser access)
- CloudFrontï¼ˆCDNï¼‰

### AI æ¨¡å‹
- **Conversational**: AWS Bedrock (Claude 4.5 Sonnet, Qwen3 235B, Nova 2 Lite)
- **Search**: Amazon Nova Search â†’ Google Grounding (automatic fallback)
- **Image Generation**: Qwen-Image (SageMaker), Bedrock Stable Diffusion
- **Video Generation**: Wan2.2 (SageMaker)
- **Fallback**: Gemini 2.5 Flash/Pro for all capabilities

### å¹¿å‘Šå¹³å° API
- Meta Marketing API
- TikTok Ads API
- Google Ads API

### éƒ¨ç½²
- AWS ECSï¼ˆå®¹å™¨åŒ–éƒ¨ç½²ï¼‰
- AWS RDSï¼ˆæ•°æ®åº“ï¼‰
- AWS ElastiCacheï¼ˆRedisï¼‰
- AWS æ–°åŠ å¡åŒºåŸŸ

---

## å¼€å‘ä¼˜å…ˆçº§ï¼ˆDevelopment Priorityï¼‰

### ç¬¬ 1-2 å‘¨ï¼šWeb Platform æ ¸å¿ƒ
- ç”¨æˆ·è®¤è¯
- æ•°æ®æ¨¡å—ï¼ˆç´ æã€æŠ¥è¡¨ã€è½åœ°é¡µã€æŠ•æ”¾ï¼‰
- MCP Server å®ç°
- é€šçŸ¥ä¸­å¿ƒ

### ç¬¬ 3-4 å‘¨ï¼šAd Creative
- ç´ æç”Ÿæˆ
- ç«å“åˆ†æ
- ç´ æè¯„åˆ†
- MCP Client å®ç°

### ç¬¬ 5 å‘¨ï¼šAd Performance
- å¯¹è¯å¼äº¤äº’
- æ•°æ®æŠ“å–
- AI åˆ†æ
- MCP Client å®ç°

### ç¬¬ 6 å‘¨ï¼šMarket Insights + Landing Page
- å¸‚åœºæ´å¯ŸåŠŸèƒ½
- è½åœ°é¡µç”ŸæˆåŠŸèƒ½
- MCP Client å®ç°

### ç¬¬ 9-10 å‘¨ï¼šCampaign Automation
- å¹¿å‘Šåˆ›å»ºå’Œç®¡ç†
- é¢„ç®—ä¼˜åŒ–
- è§„åˆ™å¼•æ“

---

## å‚è€ƒèµ„æ–™ï¼ˆReferencesï¼‰

- [MCP Protocol Specification](https://modelcontextprotocol.io/)
- [Google Gemini Agent Example](https://codelabs.developers.google.com/codelabs/currency-agent?hl=zh-cn#0)
- [LangChain Documentation](https://python.langchain.com/)
- [Meta Marketing API](https://developers.facebook.com/docs/marketing-apis)
- [TikTok Ads API](https://ads.tiktok.com/marketing_api/docs)
